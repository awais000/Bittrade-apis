{"version":3,"sources":["../../server/multer/index.js"],"names":["checkFileType","file","cb","filetypes","extname","test","path","originalname","toLowerCase","mimetype","upload","storage","multer","memoryStorage","limits","fileSize","fileFilter","req","array"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,SAASA,aAAT,CAAuBC,IAAvB,EAA6BC,EAA7B,EAAgC;AAC9B;AACA,MAAMC,YAAY,kBAAlB;AACA;AACA,MAAMC,UAAUD,UAAUE,IAAV,CAAeC,eAAKF,OAAL,CAAaH,KAAKM,YAAlB,EAAgCC,WAAhC,EAAf,CAAhB;AACA;AACA,MAAMC,WAAWN,UAAUE,IAAV,CAAeJ,KAAKQ,QAApB,CAAjB;;AAEA,MAAGA,YAAYL,OAAf,EAAuB;AACrB,WAAOF,GAAG,IAAH,EAAQ,IAAR,CAAP;AACD,GAFD,MAEO;AACLA,OAAG,qBAAH;AACD;AACF;;AAED;AACA,IAAMQ,SAAS,sBAAO;AACpBC,WAASC,iBAAOC,aAAP,EADW;AAEpBC,UAAO,EAACC,UAAU,OAAX,EAFa;AAGpBC,cAAY,oBAASC,GAAT,EAAchB,IAAd,EAAoBC,EAApB,EAAuB;AACjCF,kBAAcC,IAAd,EAAoBC,EAApB;AACD;AALmB,CAAP,EAMZgB,KANY,CAMN,eANM,EAMU,CANV,CAAf;;kBAQeR,M","file":"index.js","sourcesContent":["import multer from 'multer';\r\nimport path from 'path'\r\n\r\n\r\n// Set The Storage Engine\r\n// const storage = multer.diskStorage({\r\n//   destination: './public/uploads/',\r\n//   filename: function(req, file, cb){\r\n//     cb(null,file.fieldname + '-' + Date.now() +uuid()+ path.extname(file.originalname));\r\n//   }\r\n// });\r\n\r\n\r\n// Check File Type\r\nfunction checkFileType(file, cb){\r\n  // Allowed ext\r\n  const filetypes = /jpeg|jpg|png|gif/;\r\n  // Check ext\r\n  const extname = filetypes.test(path.extname(file.originalname).toLowerCase());\r\n  // Check mime\r\n  const mimetype = filetypes.test(file.mimetype);\r\n\r\n  if(mimetype && extname){\r\n    return cb(null,true);\r\n  } else {\r\n    cb('Error: Images Only!');\r\n  }\r\n}\r\n\r\n// Init Upload\r\nconst upload = multer({\r\n  storage: multer.memoryStorage(),\r\n  limits:{fileSize: 1000000},\r\n  fileFilter: function(req, file, cb){\r\n    checkFileType(file, cb);\r\n  }\r\n}).array('productimages',6);\r\n\r\nexport default upload;"]}